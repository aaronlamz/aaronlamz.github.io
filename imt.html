<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>imToken JS 支付</title>
</head>
<body>
  <h2>imToken - USDT 支付</h2>
  <p id="status">状态：等待点击</p>
  <button onclick="sendUSDT()">发起支付</button>

  <script>
    async function sendUSDT() {
      if (typeof window.imToken === "undefined") {
        alert("请在 imToken App 中打开此页面");
        return;
      }

      document.getElementById("status").innerText = "正在拉起转账...";

      try {
        const result = await window.imToken.callAPI("native.transaction.sendToken", {
          to: "0x39eED5Ed04dbFA049890D77B0309Aa1a2D411075", // 收款地址
          contractAddress: "0xdAC17F958D2ee523a2206206994597C13D831ec7", // Ethereum USDT 合约
          amount: "10", // USDT 数量（整数）
          decimals: 6,
          symbol: "USDT"
        });

        console.log("转账成功:", result);
        document.getElementById("status").innerText = `转账成功，交易哈希：${result.txHash}`;
      } catch (err) {
        console.error("转账失败:", err);
        document.getElementById("status").innerText = "转账失败：" + err.message;
      }
    }
  </script>
</body>
</html>